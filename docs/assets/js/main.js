"use strict";const form=document.querySelector(".js_form"),input=document.querySelector(".js_input"),searchBtn=document.querySelector(".js_searchBtn"),resetBtn=document.querySelector(".js_resetBtn"),ulFavoriteList=document.querySelector(".js_favorites"),ulList=document.querySelector(".js_list");let searchList=[],favoriteList=[];function handleSubmit(e){e.preventDefault()}function handleSubmit(e){e.preventDefault()}function getInfoApi(){const e=input.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+e).then(e=>e.json()).then(e=>{console.log(e),searchList=e.drinks.map(e=>({name:e.strDrink,image:e.strDrinkThumb,alt:e.strImageAttributio,id:e.idDrink})),renderItem(searchList),renderFav()})}function handleClick(e){e.preventDefault(),getInfoApi()}function renderItem(e){let t="";ulList.innerHTML="";for(const i of e){let e="",s="";const n=favoriteList.findIndex(e=>e.id===i.id);e=-1!==n?"fav-style__fav-title":"",s=-1!==n?"fav-style__fav-image":"",""===i.image?(t+=`<li class='style js_listItem'  id =${i.id}>`,t+=`<h3 class='style__title js_itemTitle ${e}'> ${i.name}</h3>`,t+=`<img class= 'style__image js_itemImage ${s}' src = 'https://via.placeholder.com/210x295/ffffff/666666/?text=cÃ³ctel' alt  ${i.alt}/>`,t+="</li>"):(t+=`<li class='style js_listItem' id =${i.id}>`,t+=`<h3 class ='style__title js_itemTitle ${e}'> ${i.name}</h3>`,t+=`<img class ='style__image js_itemImage ${s} ' src = ${i.image} alt  ${i.alt}/></li>`,t+="</li>")}ulList.innerHTML+=t,listenerList()}function handleClickList(e){const t=e.currentTarget.id;console.log(t);const i=searchList.find(e=>e.id===t),s=favoriteList.findIndex(e=>e.id===t);-1===s?favoriteList.push(i):favoriteList.splice(s,1),copyInLocalStorage(),renderItem(searchList),renderFav(),console.log(favoriteList)}function renderFav(){let e="";ulFavoriteList.innerHTML="";for(const t of favoriteList)e+=`<li class='fav-style js_listItem' id =${t.id}>`,e+=`<h3 class ='fav-style__fav-title js_itemTitle '> ${t.name}</h3>`,e+="<div class='close js_closeBtn'>",e+="<p class= close__text>X</p>",e+="</div>",e+=`<img class ='fav-style__fav-image js_itemImage' src = ${t.image} alt  ${t.alt}/></li>`,e+="</li>";ulFavoriteList.innerHTML+=e,listenerCloseBtn(),listenerResetBtn()}function listenerList(){const e=document.querySelectorAll(".js_listItem");for(const t of e)t.addEventListener("click",handleClickList)}function copyInLocalStorage(){const e=JSON.stringify(favoriteList);localStorage.setItem("favoriteList",e)}function getLocalStorageFavs(){const e=localStorage.getItem("favoriteList"),t=JSON.parse(e);null!==e&&(favoriteList=t),renderFav()}function handleClickCloseBtn(e){e.preventDefault();const t=e.currentTarget.id,i=favoriteList.findIndex(e=>e.id===t);-1===i&&favoriteList.splice(i,1),copyInLocalStorage(),renderFav(),renderItem(searchList)}function listenerCloseBtn(){const e=document.querySelectorAll(".js_closeBtn");for(const t of e)t.addEventListener("click",handleClickCloseBtn)}function handleResetBtn(e){e.preventDefault(),ulFavoriteList.innerHTML="",console.log("holareset")}function listenerResetBtn(){resetBtn.addEventListener("click",handleResetBtn)}form.addEventListener("click",handleSubmit),searchBtn.addEventListener("click",handleClick),getLocalStorageFavs();